window.Api={init:()=>{var e={},t="http://localhost:8000";return e.loadRecipients=(()=>{for(var e=[],t=0;t<5;t++)e[t]={id:t,name:"Worker"+t,email:"example"+t+"@example.com"};return e}),e.randomMailProvider=(()=>Math.random()>.5?t+"/mailgun":t+"/sendgrid"),e.sendMessage=((t,s,n)=>{e.randomMailProvider(),recipients}),e}},window.App={init:()=>{var e=Api.init(),t=Form.init(),s=List.init(e);Message.init(e,t,s)}},document.addEventListener("DOMContentLoaded",App.init),window.Form={init:()=>{var e={},t=document.querySelector("#message form"),s=t.querySelector("#send"),n=t.querySelector("#subject"),r=t.querySelector("#content"),i=t.querySelector("#result");return e.formValidation=(()=>e.getSubjectValue().length?!!e.getContentValue().length||r:n),e.getSubjectValue=(()=>n.value),e.getContentValue=(()=>r.value),e.getButtonElement=(()=>s),e.getResultElement=(()=>i),e}},window.List={init:e=>{var t={},s=document.querySelector("#recipients"),n=s.querySelector("#add"),r=s.querySelector(".recipients-list");return t.handleButton=(()=>{n.addEventListener("click",function(){alert("Here should be possibility to add new recipient.")})}),t.loadRecipients=(()=>e.loadRecipients()),t.recipentHandler=(e=>{e.preventDefault(),event.currentTarget.classList.toggle("active")}),t.drawList=(()=>{var e=t.loadRecipients();r.innerHTML="",e.forEach(e=>{var s=document.createElement("li");s.dataset.id=e.id,s.innerHTML='<i class="first-icon fas fa-user"></i> <span class="name">'+e.name+'</span> <span class="email">'+e.email+'</span> <i class="checked-icon fas fa-check-square"></i> <i class="checked-icon far fa-square"></i>',s.addEventListener("click",t.recipentHandler),r.appendChild(s)})}),t.getCheckedRecipients=(()=>{var e=r.querySelectorAll("li"),t=[];return e.forEach(e=>{if(-1!==e.className.indexOf("active")){var s=e.dataset.id,n=e.querySelector(".email").innerText,r=e.querySelector(".name").innerText;t.push({id:s,email:n,name:r})}}),t}),t.addRecipient=((e,t)=>{}),t.handleButton(),t.drawList(),t}},window.Message={init:(e,t,s)=>{var n={handleButton:()=>{t.getButtonElement().addEventListener("click",e=>{e.preventDefault();var r=t.formValidation();if(!0===r){n.showSuccess("Message is correct.");var i=s.getCheckedRecipients();if(0===i.length)n.showError("You need to choose some recipients.");else{let e=t.getSubjectValue(),s=t.getContentValue();n.sendMessages(i,e,s)}}else n.showError('Field "'+r.id+'" is incorrect.'),r.focus()})},showError:e=>{var s=t.getResultElement();s.classList.remove("success"),s.classList.remove("info"),s.classList.add("error"),s.innerHTML=e},showInfo:e=>{var s=t.getResultElement();s.classList.remove("error"),s.classList.remove("success"),s.classList.add("info"),s.innerHTML=e},showSuccess:e=>{var s=t.getResultElement();s.classList.remove("error"),s.classList.remove("info"),s.classList.add("success"),s.innerHTML=e},sendMessages:t=>{n.showInfo("Messages are being sent right now.");var s=[];t.forEach(t=>{var n=e.sendMessage(t,subject,content);s.push(n)})}};return n.handleButton(),n}};